# 技術的負債リスト

## 🔴 高優先度（セキュリティ・パフォーマンス）

### 1. 入力値検証の不統一
**問題**: フロントエンドとバックエンドで検証ロジックが重複・不一致
**影響**: セキュリティリスク、バグの温床
**解決案**: 
- Zodスキーマの共有化
- バリデーションロジックの一元管理
**見積もり**: 1週間

### 2. エラーハンドリングの不足
**問題**: try-catchが不十分、エラー表示が不親切
**影響**: ユーザー体験の低下、デバッグの困難
**解決案**:
- グローバルエラーハンドラー実装
- エラーバウンダリーの追加
- ユーザーフレンドリーなエラーメッセージ
**見積もり**: 3日

### 3. API呼び出しの最適化不足
**問題**: 不要な再レンダリング、過剰なAPI呼び出し
**影響**: パフォーマンス低下、Convexの使用量増加
**解決案**:
- React Queryの導入検討
- キャッシング戦略の実装
- デバウンス・スロットリングの追加
**見積もり**: 1週間

---

## 🟡 中優先度（保守性・拡張性）

### 4. コンポーネントの責務が不明確
**問題**: 巨大なコンポーネント、ロジックとUIの混在
**影響**: テストが困難、再利用性が低い
**解決案**:
- コンポーネントの分割
- カスタムHooksへのロジック抽出
- プレゼンテーショナル/コンテナパターン
**見積もり**: 2週間（継続的）

### 5. 型定義の不完全性
**問題**: `any`型の使用、型の重複定義
**影響**: TypeScriptの恩恵を受けられない
**解決案**:
- 厳密な型定義の追加
- 型の共有化・一元管理
- `strict`モードの有効化
**見積もり**: 1週間

### 6. テストカバレッジの不足
**問題**: テストが25%未満、E2Eテストなし
**影響**: リグレッションリスク、品質保証が困難
**解決案**:
- ユニットテストの追加（目標: 80%）
- 統合テストの実装
- E2Eテスト（Playwright）導入
**見積もり**: 3週間

---

## 🟢 低優先度（最適化・改善）

### 7. バンドルサイズの最適化
**問題**: 未使用コードのインポート、大きなライブラリ
**影響**: 初期ロード時間の増加
**解決案**:
- Tree shakingの改善
- 動的インポートの活用
- バンドル分析ツールの導入
**見積もり**: 3日

### 8. アクセシビリティの改善
**問題**: スクリーンリーダー対応不足、キーボードナビゲーション
**影響**: 一部ユーザーが使用困難
**解決案**:
- ARIA属性の追加
- フォーカス管理の改善
- カラーコントラストの調整
**見積もり**: 1週間

### 9. 開発環境の改善
**問題**: ホットリロードが遅い、デバッグツール不足
**影響**: 開発効率の低下
**解決案**:
- React DevToolsの設定最適化
- デバッグ用ユーティリティ追加
- 開発用モックデータの整備
**見積もり**: 3日

---

## 📋 リファクタリング候補

### ファイル・フォルダ構造
1. `components/`フォルダが肥大化
   - 機能別にサブフォルダ化
   - 共通UIコンポーネントの分離

2. `app/`ディレクトリの整理
   - グループ化による整理
   - 共通レイアウトの抽出

### コードの重複
1. プロンプトカード表示ロジック
   - 3箇所で類似コード
   - 共通コンポーネント化が必要

2. フォーム処理
   - バリデーションロジックの重複
   - カスタムHookでの共通化

### 命名規則の統一
1. 関数名の不統一
   - `getUser` vs `fetchUser`
   - 命名規則ガイドライン作成

2. コンポーネント名
   - 一部がケバブケース
   - PascalCaseに統一

---

## 🔧 インフラ・設定

### CI/CD
- GitHub Actionsの未設定
- 自動テスト・デプロイの不在
- コード品質チェックの自動化

### 監視・ログ
- エラー監視ツールなし（Sentry推奨）
- パフォーマンス監視なし
- ユーザー行動分析なし

### セキュリティ
- セキュリティヘッダー未設定
- レート制限の未実装
- CORS設定の見直し

---

## 📊 技術的負債の影響度マトリックス

```
高影響度
    ↑
    │ [1.入力検証]  [3.API最適化]
    │ [2.エラー処理]
    │
    │ [4.コンポーネント] [6.テスト]
    │ [5.型定義]
    │
    │ [7.バンドル] [8.a11y] [9.開発環境]
    │
    └─────────────────────────────→
        緊急度                   高
```

---

## 🎯 解決計画

### Phase 1 (1ヶ月目)
- 入力値検証の統一
- エラーハンドリング改善
- 基本的なテスト追加

### Phase 2 (2ヶ月目)
- API最適化
- コンポーネントリファクタリング
- CI/CD設定

### Phase 3 (3ヶ月目)
- 完全なテストカバレッジ
- パフォーマンス最適化
- 監視ツール導入

---

**最終更新**: 2025-06-16
**次回レビュー**: 2025-06-30